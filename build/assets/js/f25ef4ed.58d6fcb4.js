"use strict";(globalThis.webpackChunkai_robotics_book=globalThis.webpackChunkai_robotics_book||[]).push([[944],{2105:(n,e,a)=>{a.r(e),a.d(e,{assets:()=>s,contentTitle:()=>r,default:()=>p,frontMatter:()=>i,metadata:()=>l,toc:()=>_});var o=a(4848),t=a(8453);const i={sidebar_position:4},r="Nav2 Path Planning: Advanced Navigation and Autonomous Movement",l={id:"module-3-ai-robot-brain/nav2-path-planning",title:"Nav2 Path Planning: Advanced Navigation and Autonomous Movement",description:"Learning Objectives",source:"@site/docs/module-3-ai-robot-brain/nav2-path-planning.md",sourceDirName:"module-3-ai-robot-brain",slug:"/module-3-ai-robot-brain/nav2-path-planning",permalink:"/ai-robotic-book/docs/module-3-ai-robot-brain/nav2-path-planning",draft:!1,unlisted:!1,editUrl:"https://github.com/your-username/ai-robotic-book/tree/main/docs/module-3-ai-robot-brain/nav2-path-planning.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"Isaac ROS Integration: GPU-Accelerated Perception and VSLAM",permalink:"/ai-robotic-book/docs/module-3-ai-robot-brain/isaac-ros-vslam"},next:{title:"Reinforcement Learning for Locomotion: AI-Driven Movement Control",permalink:"/ai-robotic-book/docs/module-3-ai-robot-brain/reinforcement-learning-locomotion"}},s={},_=[{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"Introduction to Navigation2 (Nav2)",id:"introduction-to-navigation2-nav2",level:2},{value:"Nav2 Architecture",id:"nav2-architecture",level:2},{value:"Core Components",id:"core-components",level:3},{value:"1. Navigation Server",id:"1-navigation-server",level:4},{value:"2. Global Planner",id:"2-global-planner",level:4},{value:"3. Local Planner",id:"3-local-planner",level:4},{value:"4. Costmap 2D",id:"4-costmap-2d",level:4},{value:"5. Controller",id:"5-controller",level:4},{value:"System Architecture",id:"system-architecture",level:3},{value:"Installing Nav2",id:"installing-nav2",level:2},{value:"Prerequisites",id:"prerequisites",level:3},{value:"Installation Methods",id:"installation-methods",level:3},{value:"Method 1: Binary Installation (Recommended)",id:"method-1-binary-installation-recommended",level:4},{value:"Method 2: Source Installation (For Development)",id:"method-2-source-installation-for-development",level:4},{value:"Nav2 Configuration",id:"nav2-configuration",level:2},{value:"Basic Configuration Files",id:"basic-configuration-files",level:3},{value:"1. Main Nav2 Configuration (<code>nav2_params.yaml</code>)",id:"1-main-nav2-configuration-nav2_paramsyaml",level:4},{value:"Behavior Trees Configuration",id:"behavior-trees-configuration",level:3},{value:"Launching Nav2",id:"launching-nav2",level:2},{value:"Basic Nav2 Launch File",id:"basic-nav2-launch-file",level:3},{value:"Costmap Configuration",id:"costmap-configuration",level:2},{value:"Understanding Costmaps",id:"understanding-costmaps",level:3},{value:"Costmap Parameters",id:"costmap-parameters",level:3},{value:"Path Planning Algorithms",id:"path-planning-algorithms",level:2},{value:"Global Planners",id:"global-planners",level:3},{value:"1. Navfn Planner (A* based)",id:"1-navfn-planner-a-based",level:4},{value:"2. Smac Planner (State Lattice based)",id:"2-smac-planner-state-lattice-based",level:4},{value:"3. Smoother",id:"3-smoother",level:4},{value:"Local Planners",id:"local-planners",level:3},{value:"1. DWA Local Planner",id:"1-dwa-local-planner",level:4},{value:"2. TEB Local Planner",id:"2-teb-local-planner",level:4},{value:"Nav2 with Isaac ROS Integration",id:"nav2-with-isaac-ros-integration",level:2},{value:"Perception-Enhanced Navigation",id:"perception-enhanced-navigation",level:3},{value:"Multi-Robot Navigation",id:"multi-robot-navigation",level:2},{value:"Fleet Management Configuration",id:"fleet-management-configuration",level:3},{value:"Performance Optimization",id:"performance-optimization",level:2},{value:"Navigation Performance Tuning",id:"navigation-performance-tuning",level:3},{value:"Troubleshooting Nav2",id:"troubleshooting-nav2",level:2},{value:"Common Issues and Solutions",id:"common-issues-and-solutions",level:3},{value:"1. Navigation Timeout Issues",id:"1-navigation-timeout-issues",level:4},{value:"2. Costmap Not Updating",id:"2-costmap-not-updating",level:4},{value:"3. Robot Not Following Path",id:"3-robot-not-following-path",level:4},{value:"4. AMCL Localization Issues",id:"4-amcl-localization-issues",level:4},{value:"Exercise: Nav2 Path Planning Implementation",id:"exercise-nav2-path-planning-implementation",level:2},{value:"Summary",id:"summary",level:2}];function c(n){const e={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...n.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e.h1,{id:"nav2-path-planning-advanced-navigation-and-autonomous-movement",children:"Nav2 Path Planning: Advanced Navigation and Autonomous Movement"}),"\n",(0,o.jsx)(e.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,o.jsx)(e.p,{children:"By the end of this section, you will be able to:"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"Install and configure the Navigation2 (Nav2) framework for autonomous navigation"}),"\n",(0,o.jsx)(e.li,{children:"Understand Nav2's architecture and core components for path planning"}),"\n",(0,o.jsx)(e.li,{children:"Create and configure costmaps for obstacle avoidance and navigation"}),"\n",(0,o.jsx)(e.li,{children:"Implement global and local path planners for different scenarios"}),"\n",(0,o.jsx)(e.li,{children:"Integrate Nav2 with perception systems for dynamic navigation"}),"\n",(0,o.jsx)(e.li,{children:"Configure Nav2 for multi-robot coordination and fleet management"}),"\n",(0,o.jsx)(e.li,{children:"Validate navigation performance in simulation and real-world environments"}),"\n"]}),"\n",(0,o.jsx)(e.h2,{id:"introduction-to-navigation2-nav2",children:"Introduction to Navigation2 (Nav2)"}),"\n",(0,o.jsxs)(e.p,{children:[(0,o.jsx)(e.strong,{children:"Navigation2 (Nav2)"})," is the next-generation navigation framework for ROS 2, designed to provide robust, reliable, and flexible navigation capabilities for mobile robots. Building upon the success of ROS Navigation (NavFn), Nav2 introduces a more modular, plugin-based architecture that enables advanced navigation capabilities for complex robotic systems."]}),"\n",(0,o.jsx)(e.p,{children:"Nav2 addresses the evolving needs of robotics navigation:"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"Modular Architecture"}),": Plugin-based system for custom planners and controllers"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"Dynamic Environments"}),": Real-time obstacle detection and path replanning"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"Multi-Robot Coordination"}),": Fleet management and collision avoidance"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"Perception Integration"}),": Seamless integration with sensor systems"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"Behavior Trees"}),": Advanced decision-making for navigation behaviors"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"Safety-Critical Systems"}),": Built-in safety mechanisms and recovery behaviors"]}),"\n"]}),"\n",(0,o.jsx)(e.h2,{id:"nav2-architecture",children:"Nav2 Architecture"}),"\n",(0,o.jsx)(e.h3,{id:"core-components",children:"Core Components"}),"\n",(0,o.jsx)(e.p,{children:"Nav2 consists of several key components that work together to provide comprehensive navigation capabilities:"}),"\n",(0,o.jsx)(e.h4,{id:"1-navigation-server",children:"1. Navigation Server"}),"\n",(0,o.jsx)(e.p,{children:"The central component that coordinates all navigation activities:"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"Manages navigation lifecycle"}),"\n",(0,o.jsx)(e.li,{children:"Coordinates between different navigation components"}),"\n",(0,o.jsx)(e.li,{children:"Handles action requests from clients"}),"\n",(0,o.jsx)(e.li,{children:"Manages navigation state and recovery behaviors"}),"\n"]}),"\n",(0,o.jsx)(e.h4,{id:"2-global-planner",children:"2. Global Planner"}),"\n",(0,o.jsx)(e.p,{children:"Responsible for computing optimal paths from start to goal:"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"A* (A-star) algorithm implementation"}),"\n",(0,o.jsx)(e.li,{children:"Dijkstra's algorithm"}),"\n",(0,o.jsx)(e.li,{children:"Theta* for any-angle path planning"}),"\n",(0,o.jsx)(e.li,{children:"Custom plugin support for specialized algorithms"}),"\n"]}),"\n",(0,o.jsx)(e.h4,{id:"3-local-planner",children:"3. Local Planner"}),"\n",(0,o.jsx)(e.p,{children:"Handles short-term path following and obstacle avoidance:"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"Dynamic Window Approach (DWA)"}),"\n",(0,o.jsx)(e.li,{children:"Timed Elastic Band (TEB)"}),"\n",(0,o.jsx)(e.li,{children:"Trajectory Rollout"}),"\n",(0,o.jsx)(e.li,{children:"Custom local planner plugins"}),"\n"]}),"\n",(0,o.jsx)(e.h4,{id:"4-costmap-2d",children:"4. Costmap 2D"}),"\n",(0,o.jsx)(e.p,{children:"Dynamic obstacle mapping and collision checking:"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"Static map layer (from SLAM or pre-built maps)"}),"\n",(0,o.jsx)(e.li,{children:"Obstacle layer (from sensors like LiDAR, cameras)"}),"\n",(0,o.jsx)(e.li,{children:"Inflation layer (safety margins around obstacles)"}),"\n",(0,o.jsx)(e.li,{children:"Voxel layer (3D obstacle representation)"}),"\n"]}),"\n",(0,o.jsx)(e.h4,{id:"5-controller",children:"5. Controller"}),"\n",(0,o.jsx)(e.p,{children:"Low-level trajectory execution and robot control:"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"Pure pursuit controller"}),"\n",(0,o.jsx)(e.li,{children:"PID-based controllers"}),"\n",(0,o.jsx)(e.li,{children:"Model Predictive Control (MPC)"}),"\n",(0,o.jsx)(e.li,{children:"Custom controller plugins"}),"\n"]}),"\n",(0,o.jsx)(e.h3,{id:"system-architecture",children:"System Architecture"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   Goal Request  \u2502\u2500\u2500\u2500\u25b6\u2502  Navigation      \u2502\u2500\u2500\u2500\u25b6\u2502   Robot         \u2502\n\u2502   (Action)      \u2502    \u2502  Server          \u2502    \u2502   Controller    \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                           \u2502    \u2502    \u2502\n                           \u25bc    \u25bc    \u25bc\n                    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                    \u2502  Global Planner  \u2502\u2500\u2500\u2500\u25b6 Global Path\n                    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                           \u2502\n                    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                    \u2502  Local Planner   \u2502\u2500\u2500\u2500\u25b6 Local Trajectory\n                    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                           \u2502\n                    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                    \u2502   Costmaps       \u2502\u25c0\u2500\u2500\u2500 Sensor Data\n                    \u2502 (Global/Local)   \u2502\n                    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,o.jsx)(e.h2,{id:"installing-nav2",children:"Installing Nav2"}),"\n",(0,o.jsx)(e.h3,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,o.jsx)(e.p,{children:"Before installing Nav2, ensure you have:"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"ROS 2 Humble Hawksbill installed"}),"\n",(0,o.jsx)(e.li,{children:"Basic understanding of ROS 2 concepts (topics, services, actions)"}),"\n",(0,o.jsx)(e.li,{children:"A working robot platform or simulation environment"}),"\n",(0,o.jsx)(e.li,{children:"Sensor data (LiDAR, cameras, IMU) for navigation"}),"\n"]}),"\n",(0,o.jsx)(e.h3,{id:"installation-methods",children:"Installation Methods"}),"\n",(0,o.jsx)(e.h4,{id:"method-1-binary-installation-recommended",children:"Method 1: Binary Installation (Recommended)"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",children:"# Install Nav2 packages\nsudo apt update\nsudo apt install ros-humble-navigation2\nsudo apt install ros-humble-nav2-bringup\nsudo apt install ros-humble-nav2-rviz-plugins\nsudo apt install ros-humble-nav2-msgs\nsudo apt install ros-humble-nav2-map-server\nsudo apt install ros-humble-nav2-utils\nsudo apt install ros-humble-nav2-controllers\nsudo apt install ros-humble-nav2-planners\nsudo apt install ros-humble-nav2-behaviors\nsudo apt install ros-humble-nav2-lifecycle-manager\nsudo apt install ros-humble-nav2-amcl\n"})}),"\n",(0,o.jsx)(e.h4,{id:"method-2-source-installation-for-development",children:"Method 2: Source Installation (For Development)"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",children:"# Create a new workspace\nmkdir -p ~/nav2_ws/src\ncd ~/nav2_ws/src\n\n# Clone Nav2 repositories\ngit clone -b humble https://github.com/ros-planning/navigation2.git\ncd navigation2\ngit checkout humble\n\n# Install dependencies\ncd ~/nav2_ws\nrosdep install -i --from-path src --rosdistro humble -y\n\n# Build Nav2\ncolcon build --packages-select navigation2\nsource install/setup.bash\n"})}),"\n",(0,o.jsx)(e.h2,{id:"nav2-configuration",children:"Nav2 Configuration"}),"\n",(0,o.jsx)(e.h3,{id:"basic-configuration-files",children:"Basic Configuration Files"}),"\n",(0,o.jsx)(e.p,{children:"Nav2 uses YAML configuration files to define navigation parameters. Here's a comprehensive configuration:"}),"\n",(0,o.jsxs)(e.h4,{id:"1-main-nav2-configuration-nav2_paramsyaml",children:["1. Main Nav2 Configuration (",(0,o.jsx)(e.code,{children:"nav2_params.yaml"}),")"]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-yaml",children:'amcl:\n  ros__parameters:\n    use_sim_time: True\n    alpha1: 0.2\n    alpha2: 0.2\n    alpha3: 0.2\n    alpha4: 0.2\n    alpha5: 0.2\n    base_frame_id: "base_footprint"\n    beam_skip_distance: 0.5\n    beam_skip_error_threshold: 0.9\n    beam_skip_threshold: 0.3\n    do_beamskip: false\n    global_frame_id: "map"\n    lambda_short: 0.1\n    laser_likelihood_max_dist: 2.0\n    laser_max_range: 100.0\n    laser_min_range: -1.0\n    laser_model_type: "likelihood_field"\n    max_beams: 60\n    max_particles: 2000\n    min_particles: 500\n    odom_frame_id: "odom"\n    pf_err: 0.05\n    pf_z: 0.99\n    recovery_alpha_fast: 0.0\n    recovery_alpha_slow: 0.0\n    resample_interval: 1\n    robot_model_type: "nav2_amcl::DifferentialMotionModel"\n    save_pose_rate: 0.5\n    sigma_hit: 0.2\n    tf_broadcast: true\n    transform_tolerance: 1.0\n    update_min_a: 0.2\n    update_min_d: 0.25\n    z_hit: 0.5\n    z_max: 0.05\n    z_rand: 0.5\n    z_short: 0.05\n    scan_topic: scan\n\namcl_map_client:\n  ros__parameters:\n    use_sim_time: True\n\namcl_rclcpp_node:\n  ros__parameters:\n    use_sim_time: True\n\nbt_navigator:\n  ros__parameters:\n    use_sim_time: True\n    global_frame: map\n    robot_base_frame: base_link\n    odom_topic: /odom\n    bt_loop_duration: 10\n    default_server_timeout: 20\n    enable_groot_monitoring: True\n    groot_zmq_publisher_port: 1666\n    groot_zmq_server_port: 1667\n    default_nav_through_poses_bt_xml: $(find my_robot_bringup)/behavior_trees/navigate_w_replanning_and_recovery.xml\n    default_nav_to_pose_bt_xml: $(find my_robot_bringup)/behavior_trees/navigate_w_replanning_and_recovery.xml\n    plugin_lib_names:\n    - nav2_compute_path_to_pose_action_bt_node\n    - nav2_compute_path_through_poses_action_bt_node\n    - nav2_smooth_path_action_bt_node\n    - nav2_follow_path_action_bt_node\n    - nav2_spin_action_bt_node\n    - nav2_wait_action_bt_node\n    - nav2_back_up_action_bt_node\n    - nav2_drive_on_heading_bt_node\n    - nav2_clear_costmap_service_bt_node\n    - nav2_is_stuck_condition_bt_node\n    - nav2_have_remaining_waypoints_condition_bt_node\n    - nav2_is_path_valid_condition_bt_node\n    - nav2_initial_pose_received_condition_bt_node\n    - nav2_reinitialize_global_localization_service_bt_node\n    - nav2_rate_controller_bt_node\n    - nav2_distance_controller_bt_node\n    - nav2_speed_controller_bt_node\n    - nav2_truncate_path_action_bt_node\n    - nav2_truncate_path_local_action_bt_node\n    - nav2_goal_updater_node_bt_node\n    - nav2_recovery_node_bt_node\n    - nav2_pipeline_sequence_bt_node\n    - nav2_round_robin_node_bt_node\n    - nav2_transform_available_condition_bt_node\n    - nav2_time_expired_condition_bt_node\n    - nav2_path_expiring_timer_condition\n    - nav2_distance_traveled_condition_bt_node\n    - nav2_single_trigger_bt_node\n    - nav2_is_battery_low_condition_bt_node\n    - nav2_navigate_through_poses_action_bt_node\n    - nav2_navigate_to_pose_action_bt_node\n    - nav2_remove_passed_goals_action_bt_node\n    - nav2_planner_selector_bt_node\n    - nav2_controller_selector_bt_node\n    - nav2_goal_checker_selector_bt_node\n    - nav2_controller_cancel_bt_node\n    - nav2_path_longer_on_approach_bt_node\n    - nav2_wait_cancel_bt_node\n    - nav2_spin_cancel_bt_node\n    - nav2_back_up_cancel_bt_node\n    - nav2_drive_on_heading_cancel_bt_node\n\nbt_navigator_rclcpp_node:\n  ros__parameters:\n    use_sim_time: True\n\ncontroller_server:\n  ros__parameters:\n    use_sim_time: True\n    controller_frequency: 20.0\n    min_x_velocity_threshold: 0.001\n    min_y_velocity_threshold: 0.5\n    min_theta_velocity_threshold: 0.001\n    failure_tolerance: 0.3\n    progress_checker_plugin: "progress_checker"\n    goal_checker_plugin: "goal_checker"\n    controller_plugins: ["FollowPath"]\n\n    # Progress checker parameters\n    progress_checker:\n      plugin: "nav2_controller::SimpleProgressChecker"\n      required_movement_radius: 0.5\n      movement_time_allowance: 10.0\n\n    # Goal checker parameters\n    goal_checker:\n      plugin: "nav2_controller::SimpleGoalChecker"\n      xy_goal_tolerance: 0.25\n      yaw_goal_tolerance: 0.25\n      stateful: True\n\n    # Controller parameters\n    FollowPath:\n      plugin: "nav2_rotation_shim_controller::RotationShimController"\n      progress_checker_plugin: "progress_checker"\n      goal_checker_plugin: "goal_checker"\n      required_movement_radius: 0.5\n      movement_time_allowance: 10.0\n\ncontroller_server_rclcpp_node:\n  ros__parameters:\n    use_sim_time: True\n\nlocal_costmap:\n  local_costmap:\n    ros__parameters:\n      update_frequency: 5.0\n      publish_frequency: 2.0\n      global_frame: odom\n      robot_base_frame: base_link\n      use_sim_time: True\n      rolling_window: true\n      width: 3\n      height: 3\n      resolution: 0.05\n      robot_radius: 0.22\n      plugins: ["voxel_layer", "inflation_layer"]\n      inflation_layer:\n        plugin: "nav2_costmap_2d::InflationLayer"\n        cost_scaling_factor: 3.0\n        inflation_radius: 0.55\n      voxel_layer:\n        plugin: "nav2_costmap_2d::VoxelLayer"\n        enabled: True\n        publish_voxel_map: True\n        origin_z: 0.0\n        z_resolution: 0.05\n        z_voxels: 16\n        max_obstacle_height: 2.0\n        mark_threshold: 0\n        observation_sources: scan\n        scan:\n          topic: /scan\n          max_obstacle_height: 2.0\n          clearing: True\n          marking: True\n          data_type: "LaserScan"\n          raytrace_max_range: 3.0\n          raytrace_min_range: 0.0\n          obstacle_max_range: 2.5\n          obstacle_min_range: 0.0\n      static_layer:\n        map_subscribe_transient_local: True\n      always_send_full_costmap: True\n  local_costmap_client:\n    ros__parameters:\n      use_sim_time: True\n  local_costmap_rclcpp_node:\n    ros__parameters:\n      use_sim_time: True\n\nglobal_costmap:\n  global_costmap:\n    ros__parameters:\n      update_frequency: 1.0\n      publish_frequency: 1.0\n      global_frame: map\n      robot_base_frame: base_link\n      use_sim_time: True\n      robot_radius: 0.22\n      resolution: 0.05\n      track_unknown_space: true\n      plugins: ["static_layer", "obstacle_layer", "inflation_layer"]\n      obstacle_layer:\n        plugin: "nav2_costmap_2d::ObstacleLayer"\n        enabled: True\n        observation_sources: scan\n        scan:\n          topic: /scan\n          max_obstacle_height: 2.0\n          clearing: True\n          marking: True\n          data_type: "LaserScan"\n          raytrace_max_range: 3.0\n          raytrace_min_range: 0.0\n          obstacle_max_range: 2.5\n          obstacle_min_range: 0.0\n      static_layer:\n        plugin: "nav2_costmap_2d::StaticLayer"\n        map_subscribe_transient_local: True\n      inflation_layer:\n        plugin: "nav2_costmap_2d::InflationLayer"\n        cost_scaling_factor: 3.0\n        inflation_radius: 0.55\n      always_send_full_costmap: True\n  global_costmap_client:\n    ros__parameters:\n      use_sim_time: True\n  global_costmap_rclcpp_node:\n    ros__parameters:\n      use_sim_time: True\n\nmap_server:\n  ros__parameters:\n    use_sim_time: True\n    yaml_filename: "turtlebot3_world.yaml"\n\nmap_saver:\n  ros__parameters:\n    use_sim_time: True\n    save_map_timeout: 5.0\n    free_thresh_default: 0.25\n    occupied_thresh_default: 0.65\n\nplanner_server:\n  ros__parameters:\n    expected_planner_frequency: 20.0\n    use_sim_time: True\n    planner_plugins: ["GridBased"]\n    GridBased:\n      plugin: "nav2_navfn_planner/NavfnPlanner"\n      tolerance: 0.5\n      use_astar: false\n      allow_unknown: true\n\nplanner_server_rclcpp_node:\n  ros__parameters:\n    use_sim_time: True\n\nsmoother_server:\n  ros__parameters:\n    use_sim_time: True\n    smoother_plugins: ["simple_smoother"]\n    simple_smoother:\n      plugin: "nav2_smoother::SimpleSmoother"\n      tolerance: 1.0e-10\n      max_its: 1000\n      do_refinement: true\n\nbehavior_server:\n  ros__parameters:\n    costmap_topic: local_costmap/costmap_raw\n    footprint_topic: local_costmap/published_footprint\n    cycle_frequency: 10.0\n    behavior_plugins: ["spin", "backup", "wait", "drive_on_heading"]\n    spin:\n      plugin: "nav2_behaviors/Spin"\n      spin_dist: 1.57\n    backup:\n      plugin: "nav2_behaviors/BackUp"\n      backup_dist: 0.15\n      backup_speed: 0.025\n    wait:\n      plugin: "nav2_behaviors/Wait"\n      wait_duration: 1.0\n    drive_on_heading:\n      plugin: "nav2_behaviors/DriveOnHeading"\n      drive_on_heading_angle_tol: 0.785\n      drive_on_heading_dist_tol: 0.25\n      drive_on_heading_forward_dist: 0.3\n      drive_on_heading_max_duration: 15.0\n\nwaypoint_follower:\n  ros__parameters:\n    loop_rate: 20\n    stop_on_failure: false\n    waypoint_task_executor_plugin: "wait_at_waypoint"\n    wait_at_waypoint:\n      plugin: "nav2_waypoint_follower::WaitAtWaypoint"\n      enabled: true\n      wait_time: 1.0\n'})}),"\n",(0,o.jsx)(e.h3,{id:"behavior-trees-configuration",children:"Behavior Trees Configuration"}),"\n",(0,o.jsx)(e.p,{children:"Nav2 uses Behavior Trees (BT) for navigation decision-making. Here's an example behavior tree configuration:"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-xml",children:'\x3c!-- behavior_trees/navigate_w_replanning_and_recovery.xml --\x3e\n<root main_tree_to_execute="MainTree">\n  <BehaviorTree ID="MainTree">\n    <RecoveryNode number_of_retries="6" name="NavigateRecovery">\n      <PipelineSequence name="NavigateWithReplanning">\n        <RateController hz="1.0">\n          <RecoveryNode number_of_retries="1" name="ComputePathToPose">\n            <ComputePathToPose goal="{goal}" path="{path}" planner_id="GridBased"/>\n            <RecoveryNode number_of_retries="1" name="SmoothPath">\n              <SmoothPath path="{path}" smoothed_path="{path}" smoother_id="simple_smoother"/>\n            </RecoveryNode>\n          </RecoveryNode>\n        </RateController>\n        <RecoveryNode number_of_retries="2" name="FollowPath">\n          <FollowPath path="{path}" controller_id="FollowPath"/>\n        </RecoveryNode>\n      </PipelineSequence>\n      <RecoveryNode number_of_retries="2" name="RecoveryFallback">\n        <ClearEntireCostmap name="ClearGlobalCostmap-Context" service_name="global_costmap/clear_entirely_global_costmap"/>\n        <ClearEntireCostmap name="ClearLocalCostmap-Context" service_name="local_costmap/clear_entirely_local_costmap"/>\n        <Spin spin_dist="1.57" name="Spin"/>\n      </RecoveryNode>\n    </RecoveryNode>\n  </BehaviorTree>\n</root>\n'})}),"\n",(0,o.jsx)(e.h2,{id:"launching-nav2",children:"Launching Nav2"}),"\n",(0,o.jsx)(e.h3,{id:"basic-nav2-launch-file",children:"Basic Nav2 Launch File"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:"# launch/nav2_launch.py\nfrom launch import LaunchDescription\nfrom launch.actions import DeclareLaunchArgument, IncludeLaunchDescription\nfrom launch.launch_description_sources import PythonLaunchDescriptionSource\nfrom launch.substitutions import LaunchConfiguration, PathJoinSubstitution\nfrom launch_ros.actions import Node\nfrom launch_ros.substitutions import FindPackageShare\n\ndef generate_launch_description():\n    # Launch arguments\n    use_sim_time = DeclareLaunchArgument(\n        'use_sim_time',\n        default_value='true',\n        description='Use simulation (Gazebo) clock if true'\n    )\n\n    params_file = DeclareLaunchArgument(\n        'params_file',\n        default_value=PathJoinSubstitution([\n            FindPackageShare('my_robot_bringup'),\n            'config', 'nav2_params.yaml'\n        ]),\n        description='Full path to params file to load'\n    )\n\n    map_file = DeclareLaunchArgument(\n        'map',\n        default_value=PathJoinSubstitution([\n            FindPackageShare('my_robot_bringup'),\n            'maps', 'turtlebot3_world.yaml'\n        ]),\n        description='Full path to map file to load'\n    )\n\n    # Map server\n    map_server_cmd = Node(\n        package='nav2_map_server',\n        executable='map_server',\n        name='map_server',\n        output='screen',\n        parameters=[LaunchConfiguration('params_file')]\n    )\n\n    # Lifecycle manager\n    lifecycle_manager_cmd = Node(\n        package='nav2_lifecycle_manager',\n        executable='lifecycle_manager',\n        name='lifecycle_manager',\n        output='screen',\n        parameters=[{'use_sim_time': LaunchConfiguration('use_sim_time')},\n                    {'autostart': True},\n                    {'node_names': ['map_server',\n                                   'planner_server',\n                                   'controller_server',\n                                   'bt_navigator',\n                                   'amcl']}]\n    )\n\n    # AMCL\n    amcl_cmd = IncludeLaunchDescription(\n        PythonLaunchDescriptionSource([\n            PathJoinSubstitution([\n                FindPackageShare('nav2_amcl'),\n                'launch', 'amcl.launch.py'\n            ])\n        ]),\n        launch_arguments={'use_sim_time': LaunchConfiguration('use_sim_time'),\n                         'params_file': LaunchConfiguration('params_file')}.items()\n    )\n\n    # Planner server\n    planner_server_cmd = Node(\n        package='nav2_planner',\n        executable='planner_server',\n        name='planner_server',\n        output='screen',\n        parameters=[LaunchConfiguration('params_file')]\n    )\n\n    # Controller server\n    controller_server_cmd = Node(\n        package='nav2_controller',\n        executable='controller_server',\n        name='controller_server',\n        output='screen',\n        parameters=[LaunchConfiguration('params_file')]\n    )\n\n    # BT Navigator\n    bt_navigator_cmd = Node(\n        package='nav2_bt_navigator',\n        executable='bt_navigator',\n        name='bt_navigator',\n        output='screen',\n        parameters=[LaunchConfiguration('params_file')]\n    )\n\n    # Waypoint follower\n    waypoint_follower_cmd = Node(\n        package='nav2_waypoint_follower',\n        executable='waypoint_follower',\n        name='waypoint_follower',\n        output='screen',\n        parameters=[LaunchConfiguration('params_file')]\n    )\n\n    return LaunchDescription([\n        use_sim_time,\n        params_file,\n        map_server_cmd,\n        lifecycle_manager_cmd,\n        amcl_cmd,\n        planner_server_cmd,\n        controller_server_cmd,\n        bt_navigator_cmd,\n        waypoint_follower_cmd\n    ])\n"})}),"\n",(0,o.jsx)(e.h2,{id:"costmap-configuration",children:"Costmap Configuration"}),"\n",(0,o.jsx)(e.h3,{id:"understanding-costmaps",children:"Understanding Costmaps"}),"\n",(0,o.jsx)(e.p,{children:"Costmaps are essential for navigation, representing the environment as a grid of cells with associated costs:"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"Static Layer"}),": Represents permanent obstacles from the map"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"Obstacle Layer"}),": Represents dynamic obstacles from sensors"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"Inflation Layer"}),": Adds safety margins around obstacles"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"Voxel Layer"}),": 3D representation for height-based obstacle detection"]}),"\n"]}),"\n",(0,o.jsx)(e.h3,{id:"costmap-parameters",children:"Costmap Parameters"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-yaml",children:'# Costmap parameters\ncostmap_parameters:\n  # Global costmap (for path planning)\n  global_costmap:\n    plugins:\n      - {name: static_layer, type: "nav2_costmap_2d::StaticLayer"}\n      - {name: obstacle_layer, type: "nav2_costmap_2d::ObstacleLayer"}\n      - {name: inflation_layer, type: "nav2_costmap_2d::InflationLayer"}\n\n    # Static layer parameters\n    static_layer:\n      map_subscribe_transient_local: True\n\n    # Obstacle layer parameters\n    obstacle_layer:\n      enabled: True\n      observation_sources: scan\n      scan:\n        topic: /scan\n        max_obstacle_height: 2.0\n        clearing: True\n        marking: True\n        data_type: "LaserScan"\n        raytrace_max_range: 3.0\n        raytrace_min_range: 0.0\n        obstacle_max_range: 2.5\n        obstacle_min_range: 0.0\n\n    # Inflation layer parameters\n    inflation_layer:\n      cost_scaling_factor: 3.0\n      inflation_radius: 0.55\n\n  # Local costmap (for obstacle avoidance)\n  local_costmap:\n    plugins:\n      - {name: voxel_layer, type: "nav2_costmap_2d::VoxelLayer"}\n      - {name: inflation_layer, type: "nav2_costmap_2d::InflationLayer"}\n\n    # Voxel layer parameters\n    voxel_layer:\n      enabled: True\n      publish_voxel_map: True\n      origin_z: 0.0\n      z_resolution: 0.05\n      z_voxels: 16\n      max_obstacle_height: 2.0\n      mark_threshold: 0\n      observation_sources: scan\n      scan:\n        topic: /scan\n        max_obstacle_height: 2.0\n        clearing: True\n        marking: True\n        data_type: "LaserScan"\n        raytrace_max_range: 3.0\n        raytrace_min_range: 0.0\n        obstacle_max_range: 2.5\n        obstacle_min_range: 0.0\n'})}),"\n",(0,o.jsx)(e.h2,{id:"path-planning-algorithms",children:"Path Planning Algorithms"}),"\n",(0,o.jsx)(e.h3,{id:"global-planners",children:"Global Planners"}),"\n",(0,o.jsx)(e.p,{children:"Nav2 supports several global path planning algorithms:"}),"\n",(0,o.jsx)(e.h4,{id:"1-navfn-planner-a-based",children:"1. Navfn Planner (A* based)"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-yaml",children:'planner_server:\n  ros__parameters:\n    planner_plugins: ["GridBased"]\n    GridBased:\n      plugin: "nav2_navfn_planner/NavfnPlanner"\n      tolerance: 0.5\n      use_astar: false\n      allow_unknown: true\n'})}),"\n",(0,o.jsx)(e.h4,{id:"2-smac-planner-state-lattice-based",children:"2. Smac Planner (State Lattice based)"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-yaml",children:'planner_server:\n  ros__parameters:\n    planner_plugins: ["GridBased"]\n    GridBased:\n      plugin: "nav2_smac_planner/SmacPlanner"\n      tolerance: 0.5\n      downsample_costmap: false\n      downsampling_factor: 1\n      allow_unknown: true\n      max_iterations: 1000000\n      motion_model_for_search: "DUBIN"\n'})}),"\n",(0,o.jsx)(e.h4,{id:"3-smoother",children:"3. Smoother"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-yaml",children:'smoother_server:\n  ros__parameters:\n    smoother_plugins: ["simple_smoother"]\n    simple_smoother:\n      plugin: "nav2_smoother::SimpleSmoother"\n      tolerance: 1.0e-10\n      max_its: 1000\n      do_refinement: true\n'})}),"\n",(0,o.jsx)(e.h3,{id:"local-planners",children:"Local Planners"}),"\n",(0,o.jsx)(e.h4,{id:"1-dwa-local-planner",children:"1. DWA Local Planner"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-yaml",children:'controller_server:\n  ros__parameters:\n    controller_plugins: ["FollowPath"]\n    FollowPath:\n      plugin: "nav2_dwb_controller/DWBLocalPlanner"\n      debug_trajectory_details: True\n      min_vel_x: 0.0\n      min_vel_y: 0.0\n      max_vel_x: 0.26\n      max_vel_y: 0.0\n      max_vel_theta: 1.0\n      min_vel_theta: -1.0\n      acc_lim_x: 2.5\n      acc_lim_y: 0.0\n      acc_lim_theta: 3.2\n      decel_lim_x: -2.5\n      decel_lim_y: 0.0\n      decel_lim_theta: -3.2\n      vx_samples: 20\n      vy_samples: 5\n      vtheta_samples: 20\n      sim_time: 1.7\n      linear_granularity: 0.05\n      angular_granularity: 0.025\n      transform_tolerance: 0.2\n      xy_goal_tolerance: 0.25\n      yaw_goal_tolerance: 0.15\n      stateful: True\n      oscillation_reset_dist: 0.05\n      forward_point_distance: 0.325\n      scaling_speed: 0.25\n      max_scaling_factor: 0.2\n'})}),"\n",(0,o.jsx)(e.h4,{id:"2-teb-local-planner",children:"2. TEB Local Planner"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-yaml",children:'controller_server:\n  ros__parameters:\n    controller_plugins: ["FollowPath"]\n    FollowPath:\n      plugin: "nav2_te_babbling/TEBLocalPlanner"\n      max_vel_x: 0.4\n      max_vel_x_backwards: 0.2\n      max_vel_theta: 0.3\n      acc_lim_x: 0.5\n      acc_lim_theta: 0.5\n      xy_goal_tolerance: 0.2\n      yaw_goal_tolerance: 0.1\n      global_plan_overwrite_orientation: True\n      global_plan_viapoint_sep: -1\n      feasibility_check_no_poses: 5\n      publish_feedback: False\n      min_samples: 3\n      max_samples: 500\n      optimization: True\n      no_inner_iterations: 5\n      no_outer_iterations: 4\n      optimization_verbose: False\n      penalty_epsilon: 0.1\n      weight_max_vel_x: 2\n      weight_max_vel_theta: 1\n      weight_acc_lim_x: 1\n      weight_acc_lim_theta: 1\n      weight_kinematics_nh: 1000\n      weight_kinematics_forward_drive: 1\n      weight_kinematics_turning_radius: 1\n      weight_optimaltime: 1\n      weight_shortest_path: 0\n      weight_obstacle: 50\n      weight_inflation: 0.1\n      weight_dynamic_obstacle: 10\n      weight_dynamic_obstacle_inflation: 0.1\n      weight_viapoint: 1\n      weight_prefer_viapoint: 0\n      weight_adapt_factor: 2\n      obstacle_poses_affected: 30\n      dynamic_obstacle_inflation_dist: 0.6\n      include_dynamic_obstacles: True\n      include_costmap_obstacles: True\n      costmap_obstacles_behind_robot_dist: 1.5\n      obstacle_association_force_inclusion_factor: 1.5\n      obstacle_association_cutoff_factor: 5\n      costmap_converter_plugin: ""\n      costmap_converter_spin_thread: True\n      costmap_converter_rate: 5\n      enable_homotopy_class_planning: False\n      enable_multithreading: True\n      simple_exploration: False\n      max_number_classes: 5\n      selection_cost_hysteresis: 1.0\n      selection_prefer_initial_plan: 0.95\n      selection_obst_cost_scale: 1.0\n      selection_alternative_time_cost: False\n      roadmap_graph_no_samples: 15\n      roadmap_graph_area_width: 5\n      roadmap_graph_area_length_scale: 1.0\n      h_signature_prescaler: 0.5\n      h_signature_threshold: 0.1\n      obstacle_heading_threshold: 0.45\n      visualize_hc_graph: False\n      visualize_with_time_as_z_axis_scale: 0.0\n      publish_cost_grid_pc: False\n      global_plan_overwrite_orientation: True\n      allow_init_with_path_guess: True\n      free_goal_vel: False\n      publish_traj_pc: True\n      publish_transformed_plan: False\n      trajectory_step_size: 0.5\n      trajectory_lookahead_sampler_dist: 0.5\n      exact_arc_length: False\n      force_reinit_new_goal_dist: 1.0\n      force_penalty_initial_weight: 0.0\n      include_unknow_in_costmap: True\n      costmap_converter_id: 0\n      costmap_converter_max_desired_linear_vel: 0.3\n      costmap_converter_max_desired_angular_vel: 0.3\n      costmap_converter_rate: 5.0\n'})}),"\n",(0,o.jsx)(e.h2,{id:"nav2-with-isaac-ros-integration",children:"Nav2 with Isaac ROS Integration"}),"\n",(0,o.jsx)(e.h3,{id:"perception-enhanced-navigation",children:"Perception-Enhanced Navigation"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:'# nodes/perception_aware_navigation.py\nimport rclpy\nfrom rclpy.node import Node\nfrom geometry_msgs.msg import PoseStamped\nfrom sensor_msgs.msg import PointCloud2\nfrom nav2_msgs.action import NavigateToPose\nfrom rclpy.action import ActionClient\nimport numpy as np\nfrom scipy.spatial import distance\n\nclass PerceptionAwareNavigation(Node):\n    def __init__(self):\n        super().__init__(\'perception_aware_navigation\')\n\n        # Navigation action client\n        self.nav_client = ActionClient(self, NavigateToPose, \'navigate_to_pose\')\n\n        # Perception data\n        self.perception_sub = self.create_subscription(\n            PointCloud2, \'perception_points\', self.perception_callback, 10)\n\n        # Store perceived obstacles\n        self.obstacles = []\n\n        # Navigation parameters\n        self.safety_margin = 0.5  # meters\n        self.min_path_distance = 1.0  # meters\n\n    def perception_callback(self, msg):\n        """Process perception data for navigation planning"""\n        # Convert PointCloud2 to numpy array (simplified)\n        # In practice, use pcl_ros or similar for efficient conversion\n        self.obstacles = self.extract_obstacles_from_pointcloud(msg)\n\n    def extract_obstacles_from_pointcloud(self, pointcloud_msg):\n        """Extract obstacle positions from point cloud"""\n        # This is a simplified implementation\n        # In practice, use proper point cloud processing\n        obstacles = []\n        # Process point cloud data here\n        return obstacles\n\n    def navigate_with_obstacle_avoidance(self, target_pose):\n        """Navigate with dynamic obstacle avoidance"""\n        if not self.nav_client.wait_for_server(timeout_sec=5.0):\n            self.get_logger().error("Navigation server not available")\n            return\n\n        # Check if target is blocked by obstacles\n        if self.is_path_blocked(target_pose):\n            self.get_logger().warn("Path to target is blocked by obstacles")\n            # Implement obstacle avoidance logic\n            safe_pose = self.find_safe_alternative_pose(target_pose)\n            if safe_pose:\n                self.navigate_to_pose(safe_pose)\n            else:\n                self.get_logger().error("No safe alternative path found")\n                return\n        else:\n            self.navigate_to_pose(target_pose)\n\n    def is_path_blocked(self, target_pose):\n        """Check if path to target is blocked by obstacles"""\n        # Calculate path and check for obstacles\n        # This is a simplified implementation\n        for obstacle in self.obstacles:\n            dist_to_target = distance.euclidean(\n                [obstacle.x, obstacle.y],\n                [target_pose.pose.position.x, target_pose.pose.position.y]\n            )\n            if dist_to_target < self.safety_margin:\n                return True\n        return False\n\n    def find_safe_alternative_pose(self, original_pose):\n        """Find a safe alternative pose near the original target"""\n        # Generate alternative poses in a circle around the target\n        for angle in np.linspace(0, 2*np.pi, 8):\n            offset_x = self.safety_margin * np.cos(angle)\n            offset_y = self.safety_margin * np.sin(angle)\n\n            alternative_pose = PoseStamped()\n            alternative_pose.header.frame_id = \'map\'\n            alternative_pose.pose.position.x = original_pose.pose.position.x + offset_x\n            alternative_pose.pose.position.y = original_pose.pose.position.y + offset_y\n            alternative_pose.pose.position.z = original_pose.pose.position.z\n            alternative_pose.pose.orientation = original_pose.pose.orientation\n\n            # Check if this alternative is safe\n            if not self.is_obstacle_near_pose(alternative_pose.pose):\n                return alternative_pose\n\n        return None\n\n    def is_obstacle_near_pose(self, pose):\n        """Check if there are obstacles near a given pose"""\n        for obstacle in self.obstacles:\n            dist = distance.euclidean(\n                [obstacle.x, obstacle.y],\n                [pose.position.x, pose.position.y]\n            )\n            if dist < self.safety_margin:\n                return True\n        return False\n\n    def navigate_to_pose(self, pose_stamped):\n        """Send navigation goal to Nav2"""\n        goal_msg = NavigateToPose.Goal()\n        goal_msg.pose = pose_stamped\n\n        self.nav_client.send_goal_async(\n            goal_msg,\n            feedback_callback=self.feedback_callback\n        )\n\n    def feedback_callback(self, feedback_msg):\n        """Handle navigation feedback"""\n        self.get_logger().info(f\'Navigation progress: {feedback_msg.feedback.current_distance}\')\n\ndef main(args=None):\n    rclpy.init(args=args)\n    node = PerceptionAwareNavigation()\n\n    # Example: Navigate to a specific pose\n    target_pose = PoseStamped()\n    target_pose.header.frame_id = \'map\'\n    target_pose.pose.position.x = 5.0\n    target_pose.pose.position.y = 5.0\n    target_pose.pose.position.z = 0.0\n    target_pose.pose.orientation.w = 1.0\n\n    node.navigate_with_obstacle_avoidance(target_pose)\n\n    try:\n        rclpy.spin(node)\n    except KeyboardInterrupt:\n        pass\n    finally:\n        node.destroy_node()\n        rclpy.shutdown()\n\nif __name__ == \'__main__\':\n    main()\n'})}),"\n",(0,o.jsx)(e.h2,{id:"multi-robot-navigation",children:"Multi-Robot Navigation"}),"\n",(0,o.jsx)(e.h3,{id:"fleet-management-configuration",children:"Fleet Management Configuration"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-yaml",children:'# Multi-robot navigation configuration\nmulti_robot_nav:\n  # Robot-specific namespaces\n  robot1:\n    nav2_params:\n      use_sim_time: true\n      amcl:\n        ros__parameters:\n          base_frame_id: "robot1/base_footprint"\n          global_frame_id: "map"\n          odom_frame_id: "robot1/odom"\n      global_costmap:\n        ros__parameters:\n          global_frame: "map"\n          robot_base_frame: "robot1/base_link"\n      local_costmap:\n        ros__parameters:\n          global_frame: "robot1/odom"\n          robot_base_frame: "robot1/base_link"\n\n  robot2:\n    nav2_params:\n      use_sim_time: true\n      amcl:\n        ros__parameters:\n          base_frame_id: "robot2/base_footprint"\n          global_frame_id: "map"\n          odom_frame_id: "robot2/odom"\n      global_costmap:\n        ros__parameters:\n          global_frame: "map"\n          robot_base_frame: "robot2/base_link"\n      local_costmap:\n        ros__parameters:\n          global_frame: "robot2/odom"\n          robot_base_frame: "robot2/base_link"\n'})}),"\n",(0,o.jsx)(e.h2,{id:"performance-optimization",children:"Performance Optimization"}),"\n",(0,o.jsx)(e.h3,{id:"navigation-performance-tuning",children:"Navigation Performance Tuning"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:'# utils/nav_performance_monitor.py\nimport rclpy\nfrom rclpy.node import Node\nfrom nav_msgs.msg import Path\nfrom geometry_msgs.msg import PoseStamped\nimport time\n\nclass NavigationPerformanceMonitor(Node):\n    def __init__(self):\n        super().__init__(\'nav_performance_monitor\')\n\n        self.path_sub = self.create_subscription(\n            Path, \'global_plan\', self.path_callback, 10)\n        self.goal_sub = self.create_subscription(\n            PoseStamped, \'goal_pose\', self.goal_callback, 10)\n\n        self.path_start_time = None\n        self.path_calculation_times = []\n\n    def path_callback(self, msg):\n        """Monitor path calculation performance"""\n        if self.path_start_time:\n            calculation_time = time.time() - self.path_start_time\n            self.path_calculation_times.append(calculation_time)\n\n            # Log performance metrics\n            avg_time = sum(self.path_calculation_times) / len(self.path_calculation_times)\n            self.get_logger().info(f\'Path calculation time: {calculation_time:.3f}s, avg: {avg_time:.3f}s\')\n\n            self.path_start_time = None\n\n    def goal_callback(self, msg):\n        """Record path calculation start time"""\n        self.path_start_time = time.time()\n\ndef main(args=None):\n    rclpy.init(args=args)\n    node = NavigationPerformanceMonitor()\n\n    try:\n        rclpy.spin(node)\n    except KeyboardInterrupt:\n        pass\n    finally:\n        node.destroy_node()\n        rclpy.shutdown()\n\nif __name__ == \'__main__\':\n    main()\n'})}),"\n",(0,o.jsx)(e.h2,{id:"troubleshooting-nav2",children:"Troubleshooting Nav2"}),"\n",(0,o.jsx)(e.h3,{id:"common-issues-and-solutions",children:"Common Issues and Solutions"}),"\n",(0,o.jsx)(e.h4,{id:"1-navigation-timeout-issues",children:"1. Navigation Timeout Issues"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",children:"# Check navigation parameters\nros2 param list | grep timeout\n\n# Increase timeout values\nros2 param set /bt_navigator default_server_timeout 60\n"})}),"\n",(0,o.jsx)(e.h4,{id:"2-costmap-not-updating",children:"2. Costmap Not Updating"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",children:"# Check costmap topics\nros2 topic echo /global_costmap/costmap --field data\n\n# Verify sensor data\nros2 topic echo /scan\n"})}),"\n",(0,o.jsx)(e.h4,{id:"3-robot-not-following-path",children:"3. Robot Not Following Path"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",children:"# Check controller status\nros2 service call /controller_server/load_node std_srvs/srv/Trigger\n\n# Verify robot controller connection\nros2 topic echo /cmd_vel\n"})}),"\n",(0,o.jsx)(e.h4,{id:"4-amcl-localization-issues",children:"4. AMCL Localization Issues"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",children:'# Check AMCL status\nros2 service call /amcl/transition_lifecycle std_srvs/srv/Trigger\n\n# Reset AMCL pose\nros2 topic pub /initialpose geometry_msgs/PoseWithCovarianceStamped "..."\n'})}),"\n",(0,o.jsx)(e.h2,{id:"exercise-nav2-path-planning-implementation",children:"Exercise: Nav2 Path Planning Implementation"}),"\n",(0,o.jsxs)(e.ol,{children:["\n",(0,o.jsx)(e.li,{children:"Install Nav2 in your ROS 2 workspace"}),"\n",(0,o.jsx)(e.li,{children:"Create a map of your environment using SLAM or manually"}),"\n",(0,o.jsx)(e.li,{children:"Configure Nav2 with appropriate parameters for your robot"}),"\n",(0,o.jsx)(e.li,{children:"Launch Nav2 with your robot in simulation"}),"\n",(0,o.jsx)(e.li,{children:"Send navigation goals and observe the robot's behavior"}),"\n",(0,o.jsx)(e.li,{children:"Modify costmap parameters to improve obstacle avoidance"}),"\n",(0,o.jsx)(e.li,{children:"Test navigation in various scenarios (narrow passages, dynamic obstacles)"}),"\n",(0,o.jsx)(e.li,{children:"Implement a simple obstacle avoidance node that integrates with Nav2"}),"\n"]}),"\n",(0,o.jsx)(e.p,{children:"This exercise will give you hands-on experience with autonomous navigation systems."}),"\n",(0,o.jsx)(e.h2,{id:"summary",children:"Summary"}),"\n",(0,o.jsx)(e.p,{children:"Navigation2 provides a comprehensive, modular framework for autonomous robot navigation with advanced capabilities for path planning, obstacle avoidance, and multi-robot coordination. Its plugin-based architecture allows for customization to specific robot platforms and application requirements. Proper configuration of costmaps, planners, and controllers is essential for robust navigation performance."}),"\n",(0,o.jsx)(e.p,{children:"In the next section, we'll explore reinforcement learning techniques for bipedal locomotion control."})]})}function p(n={}){const{wrapper:e}={...(0,t.R)(),...n.components};return e?(0,o.jsx)(e,{...n,children:(0,o.jsx)(c,{...n})}):c(n)}},8453:(n,e,a)=>{a.d(e,{R:()=>r,x:()=>l});var o=a(6540);const t={},i=o.createContext(t);function r(n){const e=o.useContext(i);return o.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function l(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:r(n.components),o.createElement(i.Provider,{value:e},n.children)}}}]);