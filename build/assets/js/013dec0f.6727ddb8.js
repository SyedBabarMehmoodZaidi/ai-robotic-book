"use strict";(globalThis.webpackChunkai_robotics_book=globalThis.webpackChunkai_robotics_book||[]).push([[277],{2717:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>_,frontMatter:()=>i,metadata:()=>o,toc:()=>c});var t=r(4848),s=r(8453);const i={sidebar_position:3},l="Python Agent Integration with ROS Controllers using rclpy",o={id:"module-1-ros2/python-integration",title:"Python Agent Integration with ROS Controllers using rclpy",description:"Learning Objectives",source:"@site/docs/module-1-ros2/python-integration.md",sourceDirName:"module-1-ros2",slug:"/module-1-ros2/python-integration",permalink:"/ai-robotic-book/docs/module-1-ros2/python-integration",draft:!1,unlisted:!1,editUrl:"https://github.com/your-username/ai-robotic-book/tree/main/docs/module-1-ros2/python-integration.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"ROS 2 Architecture: Nodes, Topics, Services, and Actions",permalink:"/ai-robotic-book/docs/module-1-ros2/architecture"},next:{title:"URDF for Humanoid Robots",permalink:"/ai-robotic-book/docs/module-1-ros2/urdf-robots"}},a={},c=[{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"Introduction to rclpy",id:"introduction-to-rclpy",level:2},{value:"Setting Up Your Python Environment",id:"setting-up-your-python-environment",level:2},{value:"Virtual Environment Setup",id:"virtual-environment-setup",level:3},{value:"ROS 2 Python Dependencies",id:"ros-2-python-dependencies",level:3},{value:"Creating Your First Python Node",id:"creating-your-first-python-node",level:2},{value:"Basic Node Structure",id:"basic-node-structure",level:3},{value:"Implementing Publishers and Subscribers",id:"implementing-publishers-and-subscribers",level:2},{value:"Publisher Example",id:"publisher-example",level:3},{value:"Subscriber Example",id:"subscriber-example",level:3},{value:"Implementing Services",id:"implementing-services",level:2},{value:"Service Server",id:"service-server",level:3},{value:"Service Client",id:"service-client",level:3},{value:"Implementing Actions",id:"implementing-actions",level:2},{value:"Action Server",id:"action-server",level:3},{value:"Action Client",id:"action-client",level:3},{value:"Working with Parameters",id:"working-with-parameters",level:2},{value:"Parameter Declaration and Usage",id:"parameter-declaration-and-usage",level:3},{value:"Advanced Python Patterns",id:"advanced-python-patterns",level:2},{value:"Node Composition",id:"node-composition",level:3},{value:"Best Practices for Python Integration",id:"best-practices-for-python-integration",level:2},{value:"Error Handling",id:"error-handling",level:3},{value:"Resource Management",id:"resource-management",level:3},{value:"Exercise: Python Agent Implementation",id:"exercise-python-agent-implementation",level:2},{value:"Summary",id:"summary",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"python-agent-integration-with-ros-controllers-using-rclpy",children:"Python Agent Integration with ROS Controllers using rclpy"}),"\n",(0,t.jsx)(n.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,t.jsx)(n.p,{children:"By the end of this section, you will be able to:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Use rclpy to create ROS 2 nodes in Python"}),"\n",(0,t.jsx)(n.li,{children:"Implement publishers, subscribers, services, and actions using Python"}),"\n",(0,t.jsx)(n.li,{children:"Create Python agents that interact with ROS controllers"}),"\n",(0,t.jsx)(n.li,{children:"Handle parameters and configuration in Python nodes"}),"\n",(0,t.jsx)(n.li,{children:"Debug and test Python-based ROS nodes"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"introduction-to-rclpy",children:"Introduction to rclpy"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"rclpy"})," is the Python client library for ROS 2. It provides Python bindings for the ROS 2 client library (rcl), allowing you to create ROS 2 nodes, publish and subscribe to topics, provide and use services, and create and handle actions using Python."]}),"\n",(0,t.jsx)(n.p,{children:"Python is an excellent choice for ROS 2 development due to its simplicity, extensive libraries, and rapid prototyping capabilities. It's particularly well-suited for:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Prototyping and testing robot algorithms"}),"\n",(0,t.jsx)(n.li,{children:"Data processing and analysis"}),"\n",(0,t.jsx)(n.li,{children:"Simulation and visualization"}),"\n",(0,t.jsx)(n.li,{children:"High-level robot behaviors and decision-making"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"setting-up-your-python-environment",children:"Setting Up Your Python Environment"}),"\n",(0,t.jsx)(n.h3,{id:"virtual-environment-setup",children:"Virtual Environment Setup"}),"\n",(0,t.jsx)(n.p,{children:"It's recommended to use a virtual environment for your ROS 2 Python projects:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Create a virtual environment\npython3 -m venv ~/ros2_python_env\n\n# Activate the environment\nsource ~/ros2_python_env/bin/activate\n\n# Install additional Python packages for robotics\npip install numpy scipy matplotlib pandas jupyter\n"})}),"\n",(0,t.jsx)(n.h3,{id:"ros-2-python-dependencies",children:"ROS 2 Python Dependencies"}),"\n",(0,t.jsx)(n.p,{children:"Most ROS 2 Python dependencies are installed with the ROS 2 distribution. Verify your installation:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Check if rclpy is available\npython3 -c \"import rclpy; print('rclpy version:', rclpy.__version__)\"\n"})}),"\n",(0,t.jsx)(n.h2,{id:"creating-your-first-python-node",children:"Creating Your First Python Node"}),"\n",(0,t.jsx)(n.h3,{id:"basic-node-structure",children:"Basic Node Structure"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\n\nclass MinimalPublisher(Node):\n    def __init__(self):\n        super().__init__('minimal_publisher')\n        self.publisher_ = self.create_publisher(String, 'topic', 10)\n        timer_period = 0.5  # seconds\n        self.timer = self.create_timer(timer_period, self.timer_callback)\n        self.i = 0\n\n    def timer_callback(self):\n        msg = String()\n        msg.data = 'Hello World: %d' % self.i\n        self.publisher_.publish(msg)\n        self.get_logger().info('Publishing: \"%s\"' % msg.data)\n        self.i += 1\n\ndef main(args=None):\n    rclpy.init(args=args)\n\n    minimal_publisher = MinimalPublisher()\n\n    rclpy.spin(minimal_publisher)\n\n    # Destroy the node explicitly\n    minimal_publisher.destroy_node()\n    rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,t.jsx)(n.h2,{id:"implementing-publishers-and-subscribers",children:"Implementing Publishers and Subscribers"}),"\n",(0,t.jsx)(n.h3,{id:"publisher-example",children:"Publisher Example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String, Int32\nimport random\n\nclass RobotControllerPublisher(Node):\n    def __init__(self):\n        super().__init__('robot_controller_publisher')\n\n        # Create multiple publishers for different robot data\n        self.velocity_publisher = self.create_publisher(\n            Int32,\n            'robot_velocity',\n            10\n        )\n        self.status_publisher = self.create_publisher(\n            String,\n            'robot_status',\n            10\n        )\n\n        # Timer to publish data at regular intervals\n        self.timer = self.create_timer(0.1, self.publish_robot_data)\n        self.get_logger().info('Robot controller publisher started')\n\n    def publish_robot_data(self):\n        # Publish velocity data\n        velocity_msg = Int32()\n        velocity_msg.data = random.randint(-100, 100)  # Random velocity\n        self.velocity_publisher.publish(velocity_msg)\n\n        # Publish status data\n        status_msg = String()\n        status_msg.data = 'Operating' if velocity_msg.data != 0 else 'Idle'\n        self.status_publisher.publish(status_msg)\n\n        self.get_logger().debug(f'Published velocity: {velocity_msg.data}, status: {status_msg.data}')\n\ndef main(args=None):\n    rclpy.init(args=args)\n    publisher = RobotControllerPublisher()\n\n    try:\n        rclpy.spin(publisher)\n    except KeyboardInterrupt:\n        publisher.get_logger().info('Interrupted by user')\n    finally:\n        publisher.destroy_node()\n        rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,t.jsx)(n.h3,{id:"subscriber-example",children:"Subscriber Example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String, Int32\n\nclass RobotControllerSubscriber(Node):\n    def __init__(self):\n        super().__init__('robot_controller_subscriber')\n\n        # Create subscribers for different robot data\n        self.velocity_subscriber = self.create_subscription(\n            Int32,\n            'robot_velocity',\n            self.velocity_callback,\n            10\n        )\n        self.status_subscriber = self.create_subscription(\n            String,\n            'robot_status',\n            self.status_callback,\n            10\n        )\n\n        # Store latest values\n        self.latest_velocity = 0\n        self.latest_status = 'Unknown'\n\n        self.get_logger().info('Robot controller subscriber started')\n\n    def velocity_callback(self, msg):\n        self.latest_velocity = msg.data\n        self.get_logger().debug(f'Received velocity: {self.latest_velocity}')\n\n        # Process velocity data\n        if abs(self.latest_velocity) > 50:\n            self.get_logger().warn('High velocity detected!')\n        elif self.latest_velocity == 0:\n            self.get_logger().info('Robot is stationary')\n\n    def status_callback(self, msg):\n        self.latest_status = msg.data\n        self.get_logger().debug(f'Received status: {self.latest_status}')\n\ndef main(args=None):\n    rclpy.init(args=args)\n    subscriber = RobotControllerSubscriber()\n\n    try:\n        rclpy.spin(subscriber)\n    except KeyboardInterrupt:\n        subscriber.get_logger().info('Interrupted by user')\n    finally:\n        subscriber.destroy_node()\n        rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,t.jsx)(n.h2,{id:"implementing-services",children:"Implementing Services"}),"\n",(0,t.jsx)(n.h3,{id:"service-server",children:"Service Server"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom example_interfaces.srv import SetBool, Trigger\n\nclass RobotServiceServer(Node):\n    def __init__(self):\n        super().__init__('robot_service_server')\n\n        # Create service for enabling/disabling robot\n        self.enable_service = self.create_service(\n            SetBool,\n            'enable_robot',\n            self.enable_robot_callback\n        )\n\n        # Create service for triggering robot actions\n        self.trigger_service = self.create_service(\n            Trigger,\n            'trigger_action',\n            self.trigger_action_callback\n        )\n\n        self.robot_enabled = False\n        self.get_logger().info('Robot service server started')\n\n    def enable_robot_callback(self, request, response):\n        self.robot_enabled = request.data\n\n        if self.robot_enabled:\n            self.get_logger().info('Robot enabled')\n            response.success = True\n            response.message = 'Robot enabled successfully'\n        else:\n            self.get_logger().info('Robot disabled')\n            response.success = True\n            response.message = 'Robot disabled successfully'\n\n        return response\n\n    def trigger_action_callback(self, request, response):\n        if not self.robot_enabled:\n            response.success = False\n            response.message = 'Robot is not enabled'\n            return response\n\n        # Simulate robot action\n        self.get_logger().info('Triggering robot action')\n        # Perform the actual action here\n        response.success = True\n        response.message = 'Action completed successfully'\n\n        return response\n\ndef main(args=None):\n    rclpy.init(args=args)\n    service_server = RobotServiceServer()\n\n    try:\n        rclpy.spin(service_server)\n    except KeyboardInterrupt:\n        service_server.get_logger().info('Interrupted by user')\n    finally:\n        service_server.destroy_node()\n        rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,t.jsx)(n.h3,{id:"service-client",children:"Service Client"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom example_interfaces.srv import SetBool, Trigger\n\nclass RobotServiceClient(Node):\n    def __init__(self):\n        super().__init__('robot_service_client')\n\n        # Create clients for the services\n        self.enable_client = self.create_client(SetBool, 'enable_robot')\n        self.trigger_client = self.create_client(Trigger, 'trigger_action')\n\n        while not self.enable_client.wait_for_service(timeout_sec=1.0):\n            self.get_logger().info('Enable service not available, waiting again...')\n\n        while not self.trigger_client.wait_for_service(timeout_sec=1.0):\n            self.get_logger().info('Trigger service not available, waiting again...')\n\n        self.get_logger().info('Service clients ready')\n\n    def enable_robot(self, enable):\n        request = SetBool.Request()\n        request.data = enable\n\n        future = self.enable_client.call_async(request)\n        return future\n\n    def trigger_action(self):\n        request = Trigger.Request()\n\n        future = self.trigger_client.call_async(request)\n        return future\n\ndef main(args=None):\n    rclpy.init(args=args)\n    client = RobotServiceClient()\n\n    # Example usage\n    import time\n\n    # Enable robot\n    future = client.enable_robot(True)\n    rclpy.spin_until_future_complete(client, future)\n    response = future.result()\n    print(f'Enable response: {response.success}, {response.message}')\n\n    time.sleep(1)\n\n    # Trigger action\n    future = client.trigger_action()\n    rclpy.spin_until_future_complete(client, future)\n    response = future.result()\n    print(f'Trigger response: {response.success}, {response.message}')\n\n    client.destroy_node()\n    rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,t.jsx)(n.h2,{id:"implementing-actions",children:"Implementing Actions"}),"\n",(0,t.jsx)(n.h3,{id:"action-server",children:"Action Server"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.action import ActionServer, CancelResponse\nfrom rclpy.node import Node\nfrom example_interfaces.action import Fibonacci\n\nclass RobotActionServer(Node):\n    def __init__(self):\n        super().__init__('robot_action_server')\n        self._action_server = ActionServer(\n            self,\n            Fibonacci,\n            'robot_fibonacci',\n            self.execute_callback,\n            cancel_callback=self.cancel_callback)\n\n    def execute_callback(self, goal_handle):\n        self.get_logger().info('Executing robot fibonacci goal...')\n\n        # Initialize result\n        feedback_msg = Fibonacci.Feedback()\n        feedback_msg.sequence = [0, 1]\n\n        for i in range(1, goal_handle.request.order):\n            if goal_handle.is_cancel_requested:\n                goal_handle.canceled()\n                self.get_logger().info('Goal canceled')\n                return Fibonacci.Result()\n\n            feedback_msg.sequence.append(\n                feedback_msg.sequence[i] + feedback_msg.sequence[i-1])\n\n            # Publish feedback\n            goal_handle.publish_feedback(feedback_msg)\n            self.get_logger().info(f'Feedback: {feedback_msg.sequence}')\n\n            # Simulate processing time\n            from time import sleep\n            sleep(0.5)\n\n        goal_handle.succeed()\n        result = Fibonacci.Result()\n        result.sequence = feedback_msg.sequence\n        self.get_logger().info(f'Result: {result.sequence}')\n\n        return result\n\n    def cancel_callback(self, goal_handle):\n        self.get_logger().info('Received cancel request')\n        return CancelResponse.ACCEPT\n\ndef main(args=None):\n    rclpy.init(args=args)\n    action_server = RobotActionServer()\n\n    try:\n        rclpy.spin(action_server)\n    except KeyboardInterrupt:\n        action_server.get_logger().info('Interrupted by user')\n    finally:\n        action_server.destroy_node()\n        rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,t.jsx)(n.h3,{id:"action-client",children:"Action Client"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.action import ActionClient\nfrom rclpy.node import Node\nfrom example_interfaces.action import Fibonacci\n\nclass RobotActionClient(Node):\n    def __init__(self):\n        super().__init__('robot_action_client')\n        self._action_client = ActionClient(\n            self,\n            Fibonacci,\n            'robot_fibonacci')\n\n    def send_goal(self, order):\n        goal_msg = Fibonacci.Goal()\n        goal_msg.order = order\n\n        self._action_client.wait_for_server()\n\n        self._send_goal_future = self._action_client.send_goal_async(\n            goal_msg,\n            feedback_callback=self.feedback_callback)\n\n        self._send_goal_future.add_done_callback(self.goal_response_callback)\n\n    def goal_response_callback(self, future):\n        goal_handle = future.result()\n        if not goal_handle.accepted:\n            self.get_logger().info('Goal rejected')\n            return\n\n        self.get_logger().info('Goal accepted')\n\n        self._get_result_future = goal_handle.get_result_async()\n        self._get_result_future.add_done_callback(self.get_result_callback)\n\n    def feedback_callback(self, feedback_msg):\n        feedback = feedback_msg.feedback\n        self.get_logger().info(f'Received feedback: {feedback.sequence}')\n\n    def get_result_callback(self, future):\n        result = future.result().result\n        self.get_logger().info(f'Result: {result.sequence}')\n\ndef main(args=None):\n    rclpy.init(args=args)\n    action_client = RobotActionClient()\n\n    # Send goal\n    action_client.send_goal(10)\n\n    try:\n        rclpy.spin(action_client)\n    except KeyboardInterrupt:\n        action_client.get_logger().info('Interrupted by user')\n    finally:\n        action_client.destroy_node()\n        rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,t.jsx)(n.h2,{id:"working-with-parameters",children:"Working with Parameters"}),"\n",(0,t.jsx)(n.h3,{id:"parameter-declaration-and-usage",children:"Parameter Declaration and Usage"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom rclpy.parameter import Parameter\n\nclass ParameterNode(Node):\n    def __init__(self):\n        super().__init__('parameter_node')\n\n        # Declare parameters with default values\n        self.declare_parameter('robot_name', 'my_robot')\n        self.declare_parameter('max_velocity', 1.0)\n        self.declare_parameter('safety_distance', 0.5)\n        self.declare_parameter('debug_mode', False)\n\n        # Get parameter values\n        self.robot_name = self.get_parameter('robot_name').value\n        self.max_velocity = self.get_parameter('max_velocity').value\n        self.safety_distance = self.get_parameter('safety_distance').value\n        self.debug_mode = self.get_parameter('debug_mode').value\n\n        # Set up parameter callback\n        self.add_on_set_parameters_callback(self.parameter_callback)\n\n        self.get_logger().info(f'Initialized with robot name: {self.robot_name}')\n\n    def parameter_callback(self, params):\n        for param in params:\n            if param.name == 'max_velocity':\n                if param.value > 5.0:\n                    return SetParametersResult(successful=False, reason='Max velocity too high')\n\n        return SetParametersResult(successful=True)\n\ndef main(args=None):\n    rclpy.init(args=args)\n    node = ParameterNode()\n\n    try:\n        rclpy.spin(node)\n    except KeyboardInterrupt:\n        node.get_logger().info('Interrupted by user')\n    finally:\n        node.destroy_node()\n        rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,t.jsx)(n.h2,{id:"advanced-python-patterns",children:"Advanced Python Patterns"}),"\n",(0,t.jsx)(n.h3,{id:"node-composition",children:"Node Composition"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String\n\nclass RobotControllerNode(Node):\n    def __init__(self):\n        super().__init__('robot_controller')\n\n        # Publishers\n        self.cmd_vel_publisher = self.create_publisher(String, 'cmd_vel', 10)\n        self.status_publisher = self.create_publisher(String, 'status', 10)\n\n        # Subscribers\n        self.sensor_subscriber = self.create_subscription(\n            String, 'sensor_data', self.sensor_callback, 10)\n\n        # Timers\n        self.control_timer = self.create_timer(0.05, self.control_loop)\n        self.status_timer = self.create_timer(1.0, self.status_update)\n\n        # Internal state\n        self.current_state = 'idle'\n        self.target_velocity = 0.0\n        self.sensor_data = None\n\n        self.get_logger().info('Robot controller initialized')\n\n    def sensor_callback(self, msg):\n        self.sensor_data = msg.data\n        self.get_logger().debug(f'Received sensor data: {self.sensor_data}')\n\n    def control_loop(self):\n        # Implement your control algorithm here\n        if self.current_state == 'moving':\n            cmd_msg = String()\n            cmd_msg.data = f'move {self.target_velocity}'\n            self.cmd_vel_publisher.publish(cmd_msg)\n\n    def status_update(self):\n        status_msg = String()\n        status_msg.data = f'Current state: {self.current_state}, Target vel: {self.target_velocity}'\n        self.status_publisher.publish(status_msg)\n\ndef main(args=None):\n    rclpy.init(args=args)\n    controller = RobotControllerNode()\n\n    try:\n        rclpy.spin(controller)\n    except KeyboardInterrupt:\n        controller.get_logger().info('Controller stopped by user')\n    finally:\n        controller.destroy_node()\n        rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,t.jsx)(n.h2,{id:"best-practices-for-python-integration",children:"Best Practices for Python Integration"}),"\n",(0,t.jsx)(n.h3,{id:"error-handling",children:"Error Handling"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom rclpy.exceptions import ParameterNotDeclaredException\n\nclass RobustNode(Node):\n    def __init__(self):\n        super().__init__('robust_node')\n\n        try:\n            self.declare_parameter('critical_param', 'default_value')\n            self.critical_param = self.get_parameter('critical_param').value\n        except Exception as e:\n            self.get_logger().error(f'Failed to declare parameter: {e}')\n            self.critical_param = 'default_value'\n\n    def safe_publish(self, publisher, msg):\n        try:\n            publisher.publish(msg)\n        except Exception as e:\n            self.get_logger().error(f'Failed to publish message: {e}')\n"})}),"\n",(0,t.jsx)(n.h3,{id:"resource-management",children:"Resource Management"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"class ResourceManagedNode(Node):\n    def __init__(self):\n        super().__init__('resource_managed_node')\n        self.resources = []\n\n    def destroy_node(self):\n        # Clean up resources before destroying node\n        for resource in self.resources:\n            try:\n                resource.cleanup()\n            except Exception as e:\n                self.get_logger().warn(f'Error cleaning up resource: {e}')\n\n        super().destroy_node()\n"})}),"\n",(0,t.jsx)(n.h2,{id:"exercise-python-agent-implementation",children:"Exercise: Python Agent Implementation"}),"\n",(0,t.jsx)(n.p,{children:"Create a Python agent that:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Subscribes to sensor data from a simulated robot"}),"\n",(0,t.jsx)(n.li,{children:"Processes the sensor data to determine if obstacles are present"}),"\n",(0,t.jsx)(n.li,{children:"Publishes velocity commands to avoid obstacles"}),"\n",(0,t.jsx)(n.li,{children:"Provides a service to change the robot's operating mode"}),"\n",(0,t.jsx)(n.li,{children:"Uses parameters to configure sensitivity thresholds"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"This exercise will help you integrate all the concepts learned in this section into a cohesive Python-based robot controller."}),"\n",(0,t.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,t.jsx)(n.p,{children:"Python integration with ROS 2 through rclpy provides a powerful and flexible way to create robot applications. The combination of Python's simplicity with ROS 2's communication patterns enables rapid development and prototyping of complex robotic systems. Understanding how to properly implement publishers, subscribers, services, actions, and parameters in Python is essential for creating robust and maintainable robot software."}),"\n",(0,t.jsx)(n.p,{children:"In the next section, we'll explore URDF (Unified Robot Description Format) for describing humanoid robots."})]})}function _(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>l,x:()=>o});var t=r(6540);const s={},i=t.createContext(s);function l(e){const n=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);